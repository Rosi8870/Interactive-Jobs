<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Interactive Jobs</title>
<meta name="description" content="Latest walk-ins, freshers & experienced job openings - real-time updates">
<meta name="theme-color" content="#0b1016">

<link rel="stylesheet" href="style.css" />
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
<link rel="manifest" href="manifest.json">

<!-- Fallback icons to avoid 404 -->
<link rel="apple-touch-icon" sizes="192x192" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==">
<link rel="icon" type="image/png" sizes="192x192" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==">

<!-- Google for Jobs JSON-LD (Dynamic) -->
<script type="application/ld+json" id="google-jobs-schema">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "itemListElement": []
}
</script>
<meta name="google-site-verification" content="11UDhMznl70oHBLF5T2ILNJkgx8KOcDJKADw4qLrzNs" />
</head>
<body>

<header class="top-header">
  <h1>Interactive Jobs</h1>
  <p>Latest verified walk-ins & job openings</p>
</header>

<!-- Small Clean Search -->
<div class="search-wrapper">
  <input id="search" placeholder="ðŸ” Search job title, company, location, skills..." />
</div>

<section class="jobs" id="jobList"></section>

<!-- Toast -->
<div class="toast" id="toast">
  <span id="toastText"></span>
  <button onclick="hideToast()">âœ•</button>
</div>

<!-- Job Modal -->
<div class="modal" id="modal">
  <div class="modal-card" id="modalCard">
    <button class="close-btn" onclick="closeModal()">âœ•</button>
    <h2 id="mTitle"></h2>
    <div id="mTags" style="margin:12px 0;display:flex;flex-wrap:wrap;gap:8px"></div>
    <pre id="mBody"></pre>

    <!-- Apply Button Only -->
    <div style="margin-top:20px;padding-top:20px;border-top:1px solid rgba(255,255,255,0.1)">
      <a id="mApply" target="_blank" class="apply-btn" onclick="incrementApply(modal.dataset.jobId)">Apply on Company Site</a>
      
      <p style="font-size:0.9rem;opacity:0.8;margin-top:12px;text-align:center">
        You will be redirected to the company website to apply.
      </p>
    </div>

    <!-- Chat Button -->
    <div style="margin-top:20px;padding-top:20px;border-top:1px solid rgba(255,255,255,0.1)">
      <button onclick="openChat(modal.dataset.jobId)" class="apply-btn" style="background:#25D366;color:white">ðŸ’¬ Chat with Poster (Anonymous)</button>
    </div>
  </div>
</div>

<!-- Chat Modal -->
<div class="modal" id="chatModal">
  <div class="modal-card chat-card">
    <button class="close-btn" onclick="closeChat()">âœ•</button>
    <h2>Chat: <span id="chatTitle"></span></h2>
    <div id="chatMessages" style="flex:1;overflow-y:auto;padding:10px;max-height:60vh;display:flex;flex-direction:column"></div>
    <div style="display:flex;gap:10px;margin-top:10px">
      <input id="chatInput" placeholder="Type a message..." style="flex:1;padding:14px;border-radius:16px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);color:white;font-size:1rem">
      <button onclick="sendMessage()" style="padding:14px 20px;border-radius:16px;background:#0a84ff;border:none;color:white;font-weight:600">Send</button>
    </div>
  </div>
</div>

<!-- Dock -->
<div class="dock" id="dock">
  <div class="dock-item" onclick="showView('home')">
    <span class="material-icons">home</span>
    <span>Home</span>
  </div>
  <div class="dock-item" onclick="showView('favorites')">
    <span class="material-icons">favorite</span>
    <span>Favorites</span>
  </div>
  <div class="dock-item" onclick="openTelegram()">
    <span class="material-icons">chat</span>
    <span>Telegram</span>
  </div>
  <div class="dock-item" onclick="openWhatsApp()">
    <span class="material-icons">message</span>
    <span>WhatsApp</span>
  </div>
  <div class="dock-item" onclick="showAnnouncement()">
    <span class="material-icons">notifications</span>
    <span>Alert</span>
  </div>
</div>

<script src="firebase.js"></script>
<script src="script.js"></script>
<script>
// Show announcement when Alert icon clicked
function showAnnouncement() {
  const ann = localStorage.getItem('announcement');
  if (ann) {
    showToast(ann, 15000);
  } else {
    showToast("No current announcement", 4000);
  }
}

// Show on load
window.addEventListener('load', () => {
  const ann = localStorage.getItem('announcement');
  if (ann) showToast(ann, 12000);
});
</script>
</body>
</html>